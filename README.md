Chaco Central
================

Personal portfolio + technical blog served by Nginx behind Cloudflare Tunnel. Static content is generated by Hugo.

Stack
-----
- Hugo for content (builds into `site/public/`)
- Nginx (alpine) serving static files on `8081` inside the container
- Cloudflare Tunnel (no host ports exposed)
- Docker Compose on a dedicated bridge network `web_pub`

Security
--------
- `read_only` root FS on both containers
- `no-new-privileges` enabled
- `cap_drop: [ALL]`
- `tmpfs` mounted for runtime/cache paths

Repo Layout
-----------
- `docker-compose.yml`: services and network
- `docker/nginx/nginx.conf`: hardened Nginx config (listens on 8080)
- `site/public/`: Hugo output directory (served by Nginx)
- `.env.example`: sample env; copy to `.env` and set your token
- `.gitignore`: excludes `.env` and `site/public/`

Quick Start
-----------
1) Create/confirm Cloudflare Tunnel + Hostname
   - In Cloudflare Zero Trust, create a Named Tunnel.
   - Add a Public Hostname, e.g. `www.chaco.dev`.
   - Service target: `http://web:8081` (Docker service name + internal port).

2) Set the Tunnel token
   - Copy `.env.example` to `.env` and paste your `TUNNEL_TOKEN` from the Cloudflare UI (Docker connection snippet).

3) Build Hugo content
   - Generate your site locally with Hugo, outputting to `site/public/`.
   - For now, a placeholder `index.html` is present so you can test the stack.

   Hugo Modules (theme):
   - From `site/`, initialize and fetch the theme once:
     - `hugo mod init chaco-central`
     - `hugo mod get github.com/gurusabarish/hugo-profile`

4) Bring up the stack
   - `docker compose up -d`
   - No host ports are published. Cloudflared will connect out and serve your hostname via the tunnel.

Local Development Workflow
--------------------------
- Edit content in your Hugo project (kept under `site/` in this repo context).
- Run `hugo` so the static site is written to `site/public/`.
- Deploy by updating `site/public/` and restarting `web` (if needed):
  - `docker compose restart web`

Notes
-----
- Nginx runs unprivileged on 8081 so we can drop all capabilities.
- TLS is handled by Cloudflare; Nginx serves plain HTTP in the internal network.
- Ensure your Cloudflare DNS record for the hostname is `Proxied` and bound to the tunnel.
 - 8080 already in use? This stack listens on 8081 internally (no host port exposed), so it wonâ€™t conflict with other services.

Next Content To-Dos
-------------------
- About/Resume page with external links (GitHub, LinkedIn)
- Projects landing page with flagship posts (e.g., ZFS, Pi-hole, Cloudflare Tunnel, OPNsense)
- Certifications section (Security+, Network+, A+)
- Blog and Changelog/Build Notes
